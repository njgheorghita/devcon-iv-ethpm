{"contract_types":{"registry":{"abi":[{"anonymous":false,"inputs":[{"indexed":true,"name":"_package","type":"bytes32"},{"indexed":false,"name":"_version","type":"bytes32"},{"indexed":false,"name":"_uri","type":"bytes"}],"name":"Release","type":"event"},{"constant":false,"inputs":[],"name":"__init__","outputs":[],"payable":false,"type":"constructor"},{"constant":false,"gas":35627,"inputs":[{"name":"newOwner","type":"address"}],"name":"transferOwner","outputs":[],"payable":false,"type":"function"},{"constant":false,"gas":1960,"inputs":[{"name":"packageName","type":"bytes32"},{"name":"version","type":"bytes32"}],"name":"getReleaseId","outputs":[{"name":"out","type":"bytes32"}],"payable":false,"type":"function"},{"constant":false,"gas":1509,"inputs":[{"name":"packageName","type":"bytes32"},{"name":"version","type":"bytes32"}],"name":"generateReleaseId","outputs":[{"name":"out","type":"bytes32"}],"payable":false,"type":"function"},{"constant":false,"gas":1265,"inputs":[{"name":"packageId","type":"bytes32"}],"name":"getPackageName","outputs":[{"name":"out","type":"bytes32"}],"payable":false,"type":"function"},{"constant":false,"gas":1871,"inputs":[{"name":"packageName","type":"bytes32"}],"name":"getPackageData","outputs":[{"name":"out","type":"bytes32"},{"name":"out","type":"bytes32"},{"name":"out","type":"int128"}],"payable":false,"type":"function"},{"constant":false,"gas":4796,"inputs":[{"name":"offset","type":"uint256"},{"name":"length","type":"uint256"}],"name":"getAllPackageIds","outputs":[{"name":"out","type":"bytes32"},{"name":"out","type":"bytes32"},{"name":"out","type":"bytes32"},{"name":"out","type":"bytes32"},{"name":"out","type":"bytes32"}],"payable":false,"type":"function"},{"constant":false,"gas":14965,"inputs":[{"name":"packageName","type":"bytes32"},{"name":"offset","type":"uint256"},{"name":"length","type":"uint256"}],"name":"getAllReleaseIds","outputs":[{"name":"out","type":"bytes32"},{"name":"out","type":"bytes32"},{"name":"out","type":"bytes32"},{"name":"out","type":"bytes32"},{"name":"out","type":"bytes32"}],"payable":false,"type":"function"},{"constant":false,"gas":4057,"inputs":[{"name":"releaseId","type":"bytes32"}],"name":"getReleaseData","outputs":[{"name":"out","type":"bytes32"},{"name":"out","type":"bytes32"},{"name":"out","type":"bytes"}],"payable":false,"type":"function"},{"constant":false,"gas":644678,"inputs":[{"name":"name","type":"bytes32"},{"name":"version","type":"bytes32"},{"name":"uri_1","type":"bytes32"},{"name":"uri_2","type":"bytes32"}],"name":"release","outputs":[{"name":"out","type":"bytes32"}],"payable":false,"type":"function"},{"constant":true,"gas":813,"inputs":[],"name":"owner","outputs":[{"name":"out","type":"address"}],"payable":false,"type":"function"},{"constant":true,"gas":1054,"inputs":[{"name":"arg0","type":"bytes32"}],"name":"packages__exists","outputs":[{"name":"out","type":"bool"}],"payable":false,"type":"function"},{"constant":true,"gas":1078,"inputs":[{"name":"arg0","type":"bytes32"}],"name":"packages__createdAt","outputs":[{"name":"out","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"gas":1114,"inputs":[{"name":"arg0","type":"bytes32"}],"name":"packages__updatedAt","outputs":[{"name":"out","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"gas":1144,"inputs":[{"name":"arg0","type":"bytes32"}],"name":"packages__name","outputs":[{"name":"out","type":"bytes32"}],"payable":false,"type":"function"},{"constant":true,"gas":1174,"inputs":[{"name":"arg0","type":"bytes32"}],"name":"packages__releaseCount","outputs":[{"name":"out","type":"int128"}],"payable":false,"type":"function"},{"constant":true,"gas":1204,"inputs":[{"name":"arg0","type":"bytes32"}],"name":"releases__exists","outputs":[{"name":"out","type":"bool"}],"payable":false,"type":"function"},{"constant":true,"gas":1228,"inputs":[{"name":"arg0","type":"bytes32"}],"name":"releases__createdAt","outputs":[{"name":"out","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"gas":1264,"inputs":[{"name":"arg0","type":"bytes32"}],"name":"releases__packageId","outputs":[{"name":"out","type":"bytes32"}],"payable":false,"type":"function"},{"constant":true,"gas":1294,"inputs":[{"name":"arg0","type":"bytes32"}],"name":"releases__version","outputs":[{"name":"out","type":"bytes32"}],"payable":false,"type":"function"},{"constant":true,"gas":12230,"inputs":[{"name":"arg0","type":"bytes32"}],"name":"releases__uri","outputs":[{"name":"out","type":"bytes"}],"payable":false,"type":"function"},{"constant":true,"gas":1143,"inputs":[],"name":"packageCount","outputs":[{"name":"out","type":"int128"}],"payable":false,"type":"function"},{"constant":true,"gas":1173,"inputs":[],"name":"releaseCount","outputs":[{"name":"out","type":"int128"}],"payable":false,"type":"function"}],"deployment_bytecode":{"bytecode":"0x600035601c52740100000000000000000000000000000000000000006020526f7fffffffffffffffffffffffffffffff6040527fffffffffffffffffffffffffffffffff8000000000000000000000000000000060605274012a05f1fffffffffffffffffffffffffdabf41c006080527ffffffffffffffffffffffffed5fa0e000000000000000000000000000000000060a052341561009e57600080fd5b336000556116c156600035601c52740100000000000000000000000000000000000000006020526f7fffffffffffffffffffffffffffffff6040527fffffffffffffffffffffffffffffffff8000000000000000000000000000000060605274012a05f1fffffffffffffffffffffffffdabf41c006080527ffffffffffffffffffffffffed5fa0e000000000000000000000000000000000060a052634fb2e45d60005114156100dd57602060046101403734156100b457600080fd5b60043560205181106100c557600080fd5b5033600054146100d457600080fd5b61014051600055005b632244dda0600051141561019657604060046101403734156100fe57600080fd5b6000610140516020826102000101526020810190506101605160208261020001015260208101905080610200526102009050805160200180610180828460006004600a8704601201f161015057600080fd5b505061018080516020820120905061028052600160026102805160e05260c052604060c02060c052602060c020015461018857600080fd5b6102805160005260206000f3005b6336739429600051141561022957604060046101403734156101b757600080fd5b6000610140516020826102000101526020810190506101605160208261020001015260208101905080610200526102009050805160200180610180828460006004600a8704601201f161020957600080fd5b5050610180805160208201209050610280526102805160005260206000f3005b6306fe1fd76000511415610297576020600461014037341561024a57600080fd5b600160016101405160e05260c052604060c02060c052602060c020015461027057600080fd5b600260016101405160e05260c052604060c02060c052602060c020015460005260206000f3005b63b4d6d4c7600051141561034c57602060046101403734156102b857600080fd5b6101405160c052602060c02061016052600160016101605160e05260c052604060c02060c052602060c02001546102ee57600080fd5b6060610180526101a0600260016101605160e05260c052604060c02060c052602060c02001548152610160518160200152600360016101605160e05260c052604060c02060c052602060c0200154816040015250610180516101a0f3005b6343212cf1600051141561050d576040600461014037341561036d57600080fd5b606051610140518060405190131561038457600080fd5b809190121561039257600080fd5b6101805260605161016051806040519013156103ad57600080fd5b80919012156103bb57600080fd5b6101a05260056101a051146103cf57600080fd5b6004546101805113156103e157600080fd5b610260610180516004818352015b6004546102605113151561045b5760066102605160e05260c052604060c0205461028052610280516101c06060516101805161026051038060405190131561043657600080fd5b809190121561044457600080fd5b6005811061045157600080fd5b602002015261049e565b6008546101c06060516101805161026051038060405190131561047d57600080fd5b809190121561048b57600080fd5b6005811061049857600080fd5b60200201525b5b81516001018083528114156103ef575b505060a06102a0526102c06101c06000602002015181526101c06001602002015181602001526101c06002602002015181604001526101c06003602002015181606001526101c0600460200201518160800152506102a0516102c0f3005b60001561059f575b610180526101405261016052610160516101a0526000610140516020826102400101526020810190506101a051602082610240010152602081019050806102405261024090508051602001806101c0828460006004600a8704601201f161057b57600080fd5b50506101c08051602082012090506102c0526102c051600052600051610180515650005b63fa6bf4da600051141561088c57606060046101403734156105c057600080fd5b60605161016051806040519013156105d757600080fd5b80919012156105e557600080fd5b6101a052606051610180518060405190131561060057600080fd5b809190121561060e57600080fd5b6101c05260056101c0511461062257600080fd5b6101405160c052602060c0206101e052600160016101e05160e05260c052604060c02060c052602060c020015461065857600080fd5b600360016101e05160e05260c052604060c02060c052602060c02001546101a051131561068457600080fd5b6102a06101a0516004818352015b600360016101e05160e05260c052604060c02060c052602060c02001546102a0511315156107da576101405161016051610180516101a0516101c0516101e05161020051610220516102405161026051610280516102a0516102c05163c658b60e6102e0526101e0516103005260605160016102a051018060405190131561071957600080fd5b809190121561072757600080fd5b61032052610320516103005160065801610515565b610380526102c0526102a05261028052610260526102405261022052610200526101e0526101c0526101a052610180526101605261014052610380516102c05260036102c05160e05260c052604060c020546103a0526103a0516102006060516101a0516102a05103806040519013156107b557600080fd5b80919012156107c357600080fd5b600581106107d057600080fd5b602002015261081d565b6008546102006060516101a0516102a05103806040519013156107fc57600080fd5b809190121561080a57600080fd5b6005811061081757600080fd5b60200201525b5b8151600101808352811415610692575b505060a06103c0526103e0610200600060200201518152610200600160200201518160200152610200600260200201518160400152610200600360200201518160600152610200600460200201518160800152506103c0516103e0f3005b634c4aea8760005114156109ea57602060046101403734156108ad57600080fd5b600160026101405160e05260c052604060c02060c052602060c02001546108d357600080fd5b600260026101405160e05260c052604060c02060c052602060c0200154610160526060610180526101a0600260016101605160e05260c052604060c02060c052602060c02001548152600460026101405160e05260c052604060c02060c052602060c02001548160200152610180518160400152600360026101405160e05260c052604060c02060c052602060c020018060c052602060c020610180518301602082540161012060006003818352015b82610120516020021115610996576109b8565b61012051850154610120516020028501525b8151600101808352811415610983575b5050505050506101805160206101805183015160206001820306601f820103905001016101805250610180516101a0f3005b600015610d0b575b6101e0526101405261016052610180526101a0526101c052610200526000610280525b6102005160206001820306601f820103905061028051101515610a3757610a50565b6102805161022001526102805160200161028052610a15565b60005060026101405160e05260c052604060c02060c052602060c02042815560016001820155610160516002820155610200806003830160c052602060c020602082510161012060006003818352015b82610120516020021115610ab357610ad5565b61012051602002850151610120518501555b8151600101808352811415610aa0575b50505050505061018051600482015550600360016101605160e05260c052604060c02060c052602060c02001606051600182540180604051901315610b1957600080fd5b8091901215610b2757600080fd5b81555061014051600760055460e05260c052604060c020556005606051600182540180604051901315610b5957600080fd5b8091901215610b6757600080fd5b8155506101405161016051610180516101a0516101c0516101e05161020051610220516102405161026051610280516102a05163c658b60e6102c052610160516102e052600360016101605160e05260c052604060c02060c052602060c020015461030052610300516102e05160065801610515565b610360526102a05261028052610260526102405261022052610200526101e0526101c0526101a052610180526101605261014052610360516102a0526101405160036102a05160e05260c052604060c02055610180516103e05260406103a0526103a051610400526102008051602001806103a0516103e001828460006004600a8704601201f1610c6d57600080fd5b50506103a0516103e00161038081516040818352015b604061038051101515610c9557610cb2565b6000610380516020850101535b8151600101808352811415610c83575b50505060206103a0516103e0015160206001820306601f82010390506103a05101016103a0526101c0517f366e54d26a7fd410f41f3e1ae69873cf0380649199abab80b092f988f3e189ca6103a0516103e0a26101e051565b6399d9dcc9600051141561122d5760806004610140373415610d2c57600080fd5b600854610140511415610d3e57600080fd5b600854610160511415610d5057600080fd5b3360005414610d5e57600080fd5b6000610180516020826102400101526020810190506101a051602082610240010152602081019050806102405261024090508051602001806101c0828460006004600a8704601201f1610db057600080fd5b50506101405160c052602060c0206102c05260206103a060446336739429610300526101405161032052610160516103405261031c6000305af1610df357600080fd5b6103a0516102e0526001600160016102c05160e05260c052604060c02060c052602060c020015414156110355760016102c05160e05260c052604060c02060c052602060c02060016102c05160e05260c052604060c02060c052602060c02054815560016001820155610140516002820155600360016102c05160e05260c052604060c02060c052602060c0200154600382015542600482015550600160026102e05160e05260c052604060c02060c052602060c020015415610eb557600080fd5b6101405161016051610180516101a0516101c0516101e05161020051610220516102405161026051610280516102a0516102c0516102e05161030051610320516103405161036051610380516103a05160a063836ee66e610540526102e051610560526102c05161058052610160516105a052806105c0526101c0808051602001808461056001828460006004600a8704601201f1610f5357600080fd5b50508051820160206001820306601f8201039050602001915050610140516105e052506106606106a0525b6106006106a0511015610f9057610fb4565b60006106a05151141515610fa4576106a051515b60206106a051036106a052610f7e565b6105e0516105c0516105a0516105805161056051600658016109f2565b6103a05261038052610360526103405261032052610300526102e0526102c0526102a05261028052610260526102405261022052610200526101e0526101c0526101a0526101805261016052610140526000506102e05160005260206000f361122b565b60016102c05160e05260c052604060c02060c052602060c0204281556001600182015561014051600282015560006003820155426004820155506102c051600660045460e05260c052604060c02055600460605160018254018060405190131561109e57600080fd5b80919012156110ac57600080fd5b8155506101405161016051610180516101a0516101c0516101e05161020051610220516102405161026051610280516102a0516102c0516102e05161030051610320516103405161036051610380516103a05160a063836ee66e6103c0526102e0516103e0526102c05161040052610160516104205280610440526101c080805160200180846103e001828460006004600a8704601201f161114d57600080fd5b50508051820160206001820306601f82010390506020019150506101405161046052506104e0610520525b61048061052051101561118a576111ae565b6000610520515114151561119e5761052051515b6020610520510361052052611178565b610460516104405161042051610400516103e051600658016109f2565b6103a05261038052610360526103405261032052610300526102e0526102c0526102a05261028052610260526102405261022052610200526101e0526101c0526101a0526101805261016052610140526000506102e05160005260206000f35b005b638da5cb5b600051141561125357341561124657600080fd5b60005460005260206000f3005b63c7f8a044600051141561129b576020600461014037341561127457600080fd5b600160016101405160e05260c052604060c02060c052602060c020015460005260206000f3005b636366b2f360005114156112e057602060046101403734156112bc57600080fd5b60016101405160e05260c052604060c02060c052602060c0205460005260206000f3005b63c40509d86000511415611328576020600461014037341561130157600080fd5b600460016101405160e05260c052604060c02060c052602060c020015460005260206000f3005b63cb4e26ec6000511415611370576020600461014037341561134957600080fd5b600260016101405160e05260c052604060c02060c052602060c020015460005260206000f3005b632fa39cad60005114156113b8576020600461014037341561139157600080fd5b600360016101405160e05260c052604060c02060c052602060c020015460005260206000f3005b63c67790b8600051141561140057602060046101403734156113d957600080fd5b600160026101405160e05260c052604060c02060c052602060c020015460005260206000f3005b63f1849be46000511415611445576020600461014037341561142157600080fd5b60026101405160e05260c052604060c02060c052602060c0205460005260206000f3005b63138b7ae0600051141561148d576020600461014037341561146657600080fd5b600260026101405160e05260c052604060c02060c052602060c020015460005260206000f3005b632ee2bcc160005114156114d557602060046101403734156114ae57600080fd5b600460026101405160e05260c052604060c02060c052602060c020015460005260206000f3005b635036899c60005114156115c857602060046101403734156114f657600080fd5b600360026101405160e05260c052604060c02060c052602060c020018060c052602060c0206101a0602082540161012060006003818352015b8261012051602002111561154257611564565b61012051850154610120516020028501525b815160010180835281141561152f575b5050505050506102206101a0516040818352015b6040610220511115611589576115a5565b6000610220516101c001535b8151600101808352811415611578575b505060206101805260406101a0510160206001820306601f8201039050610180f3005b63ee0ebe0c60005114156115ee5734156115e157600080fd5b60045460005260206000f3005b63b8d08db2600051141561161457341561160757600080fd5b60055460005260206000f3005b60006000fd5b6100a76116c1036100a76000396100a76116c1036000f3"},"natspec":{}}},"deployments":{"blockchain://cddd81db8415f26ac26201d396289736940deda96a36ba44be9d96d855dcbd28/block/71e9da273607bb373f04edf5f1047580d056a2fe9cdc111f6a7c851f5ec59d13":{"registry":{"address":"0xf2e246bb76df876cef8b38ae84130f4f55de395b","block":"0x71e9da273607bb373f04edf5f1047580d056a2fe9cdc111f6a7c851f5ec59d13","contract_type":"registry","transaction":"0x4da1099c880312e21818bca3f85936e81538b488b4d9b76dd4b15f0766bc1018"}}},"manifest_version":"2","package_name":"registry-v2","sources":{"registryV2.vy":"# todo\n# delete pkgs\n\n# Events\nRelease: event({_package: indexed(bytes32), _version: bytes32, _uri: bytes[64]})\n\nowner: public(address)\n\n# Package Data: (package_id => value)\npackages: public(\n    {\n        exists: bool,\n        createdAt: timestamp,\n        updatedAt: timestamp,\n        name: bytes32,\n        releaseCount: int128,\n    }[bytes32]\n)\n\n#  Release Data: (release_id => value)\nreleases: public(\n    {\n        exists: bool,\n        createdAt: timestamp,\n        packageId: bytes32,\n        version: bytes32,\n        uri: bytes[64],\n    }[bytes32]\n)\n\n\n# package_id#release_count => release_id\npackageReleaseIndex: bytes32[bytes32]\n# Total number of packages in registry\npackageCount: public(int128)\n# Total number of releases in registry\nreleaseCount: public(int128)\n# Total package number (int128) => package_id (bytes32)\npackageIds: bytes32[int128]\n# Total release number (int128) => release_id (bytes32)\nreleaseIds: bytes32[int128]\n\nEMPTY_BYTES: bytes32\n\n\n@public\ndef __init__():\n    self.owner = msg.sender\n\n\n@public\ndef transferOwner(newOwner: address):\n    assert self.owner == msg.sender\n    self.owner = newOwner\n\n\n@public\ndef getReleaseId(packageName: bytes32, version: bytes32) -> bytes32:\n    releaseConcat: bytes[64] = concat(packageName, version)\n    releaseId: bytes32 = sha3(releaseConcat)\n    assert self.releases[releaseId].exists\n    return releaseId\n\n\n@public\ndef generateReleaseId(packageName: bytes32, version: bytes32) -> bytes32:\n    releaseConcat: bytes[64] = concat(packageName, version)\n    releaseId: bytes32 = sha3(releaseConcat)\n    return releaseId\n\n\n@public\ndef getPackageName(packageId: bytes32) -> bytes32:\n    assert self.packages[packageId].exists\n    return self.packages[packageId].name\n\n\n@public\ndef getPackageData(packageName: bytes32) -> (bytes32, bytes32, int128):\n    packageId: bytes32 = sha3(packageName)\n    assert self.packages[packageId].exists\n    return (\n        self.packages[packageId].name,\n        packageId,\n        self.packages[packageId].releaseCount,\n    )\n\n\n@public\ndef getAllPackageIds(\n    offset: uint256, length: uint256\n) -> (bytes32, bytes32, bytes32, bytes32, bytes32):\n    offset_int: int128 = convert(offset, int128)\n    length_int: int128 = convert(length, int128)\n    assert length_int == 5\n    assert offset_int <= self.packageCount\n    ids: bytes32[5]\n    for idx in range(offset_int, offset_int + 4):\n        if idx <= self.packageCount:\n            packageId: bytes32 = self.packageIds[idx]\n            ids[(idx - offset_int)] = packageId\n        else:\n            ids[(idx - offset_int)] = self.EMPTY_BYTES\n    return (ids[0], ids[1], ids[2], ids[3], ids[4])\n\n\n@private\ndef generatePackageReleaseId(packageId: bytes32, count: int128) -> bytes32:\n    countBytes: bytes32 = convert(count, bytes32)\n    packageReleaseTag: bytes[64] = concat(packageId, countBytes)\n    packageReleaseId: bytes32 = sha3(packageReleaseTag)\n    return packageReleaseId\n\n\n@public\ndef getAllReleaseIds(\n    packageName: bytes32, offset: uint256, length: uint256\n) -> (bytes32, bytes32, bytes32, bytes32, bytes32):\n    offset_int: int128 = convert(offset, int128)\n    length_int: int128 = convert(length, int128)\n    assert length_int == 5\n    packageId: bytes32 = sha3(packageName)\n    assert self.packages[packageId].exists\n    assert offset_int <= self.packages[packageId].releaseCount\n    ids: bytes32[5]\n    for idx in range(offset_int, offset_int + 4):\n        if idx <= self.packages[packageId].releaseCount:\n            packageReleaseId: bytes32 = self.generatePackageReleaseId(\n                packageId, (idx + 1)\n            )\n            releaseId: bytes32 = self.packageReleaseIndex[packageReleaseId]\n            ids[(idx - offset_int)] = releaseId\n        else:\n            ids[(idx - offset_int)] = self.EMPTY_BYTES\n    return (ids[0], ids[1], ids[2], ids[3], ids[4])\n\n\n@public\ndef getReleaseData(releaseId: bytes32) -> (bytes32, bytes32, bytes[64]):\n    assert self.releases[releaseId].exists\n    packageId: bytes32 = self.releases[releaseId].packageId\n    return (\n        self.packages[packageId].name,\n        self.releases[releaseId].version,\n        self.releases[releaseId].uri,\n    )\n\n\n@private\ndef cutRelease(\n    releaseId: bytes32,\n    packageId: bytes32,\n    version: bytes32,\n    uri: bytes[64],\n    name: bytes32,\n):\n    self.releases[releaseId] = {\n        exists: True,\n        createdAt: block.timestamp,\n        packageId: packageId,\n        version: version,\n        uri: uri,\n    }\n    self.packages[packageId].releaseCount += 1\n    self.releaseIds[self.releaseCount] = releaseId\n    self.releaseCount += 1\n    packageReleaseId: bytes32 = self.generatePackageReleaseId(\n        packageId, self.packages[packageId].releaseCount\n    )\n    self.packageReleaseIndex[packageReleaseId] = releaseId\n    log.Release(name, version, uri)\n\n\n@public\ndef release(name: bytes32, version: bytes32, uri_1: bytes32, uri_2: bytes32) -> bytes32:\n    assert name != self.EMPTY_BYTES\n    assert version != self.EMPTY_BYTES\n    assert self.owner == msg.sender\n\n    uri: bytes[64] = concat(uri_1, uri_2)\n\n    packageId: bytes32 = sha3(name)\n    releaseId: bytes32 = self.generateReleaseId(name, version)\n\n    if self.packages[packageId].exists == True:\n        self.packages[packageId] = {\n            exists: True,\n            createdAt: self.packages[packageId].createdAt,\n            updatedAt: block.timestamp,\n            name: name,\n            releaseCount: self.packages[packageId].releaseCount,\n        }\n        assert self.releases[releaseId].exists == False\n        self.cutRelease(releaseId, packageId, version, uri, name)\n        return releaseId\n    else:\n        self.packages[packageId] = {\n            exists: True,\n            createdAt: block.timestamp,\n            updatedAt: block.timestamp,\n            name: name,\n            releaseCount: 0,\n        }\n        self.packageIds[self.packageCount] = packageId\n        self.packageCount += 1\n        self.cutRelease(releaseId, packageId, version, uri, name)\n        return releaseId\n"},"version":"1.0.0"}
